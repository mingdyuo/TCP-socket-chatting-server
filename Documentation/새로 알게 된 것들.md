- enum은 변수가 아님. 그냥 #define 보다는 조금 더 type에 대해 안전한 형태임. 

### listen socket의 backlog

커널은 listen 소켓에 대해 2가지 종류의 큐를 가지고 있다.

1. 불완전 연결 큐

   3악수 맺으려고 보낸 패킷을 저장하는 큐임. `SYN_RCVD` 상태임

2. 완전 연결 큐

   3악수 맺어진 클라의 패킷(소켓?)을 저장하는 큐임. `ESTABLISHED` 상태임

   `accept`되면 이 큐에 있는 맨 앞의 놈이 빠져나감

`backlog`가 뭐냐면 이 두 개의 큐에 있는 놈들의 합을 얼마까지 허용할 것인지 지정하는 것이다. 그래서 backlog만큼 큐에 애들이 꽉차면, 연결 요청이 들어와도 거절한다.

이 `backlog`값은 `SYN flooding` 공격과 관계가 있는데, 두 가지 방법으로 해결할 수 있다.

1. 큐를 늘리기
2. 소켓이 불완전 큐에 남아있는 timeout 시간을 줄이기

[출처](https://m.blog.naver.com/PostView.nhn?blogId=s2kiess&logNo=220156878532&proxyReferer=https:%2F%2Fwww.google.com%2F)

### SVN flooding 이 뭐지



### `std::vector`의 `reserve()`와 `resize()`

| `reserve()`                                                  | `resize()`                                                   |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| - capacity를 변경, 새로 입력한 capacity가 현재 capacity보다 작으면 아무 일도 일어나지 않음<br />- capacity보다 큰 값이 들어오면 모든 iterator와 레퍼런스가 invalidate된다.<br />- 공간을 예약하는 개념이다. 새로 받은 공간에 원소를 넣어주지는 않음 | - 배열의 원소 개수를 변경, 현재 크기보다 작은 값이 들어오면, 원소 개수를 줄임(제거함). 더 큰 값이 들어오면 기본 생성자를 호출해서 그만큼 채움 |

<br>

### window 스레드 생성 함수

1. `CreateThread()`

   Win32 API이다. 3번에 적혀있는 사항에 해당하지 않으면 이 함수를 사용하는 것이 좋다

2. `_beginthread()`

   C runtime library에 있다.

   이 함수는 스레드를 생성하고 바로 Handle을 닫아버리기 때문에 스레드 오브젝트와 통신이 불가능하다. 함수의 의도는 Win32의 내부적인 세부 사항을 숨기기 위한 것이지만, 버그처럼 되어버렸다. 그래서 `_beginthreadex()`에서는 이 사항이 수정되었다.

3. `_beginthreadex()`

   C runtime library에 있다.

   내부적으로는 CreateThread를 호출하는 함수다.

   이런 경우 쓰는 것이 좋다

   - 부동 소수형 변수나 함수를 사용하는 경우

   - 동적 할당을 하는 경우

   - `stdio.h`나 `io.h`에서 어떤 함수를 호출하는 경우

   - `strtok()`나 `rand()`와 같이 정적 버퍼를 사용하는 어떤 런타임 함수를 호출하는 경우

     → 멀티스레드 환경에서 문제가 될 수 있으므로, c 런타임 함수를 위한 각각의 전역 자원공간을 스레드마다 할당하는 것이 안전함

- 기타

  `_beginthread()`와 `_endthread()` 그리고 `_beginthreadex()`와 `_endthreadex()`는 짝을 이루며 명시적으로 호출해도 되고, 호출하지 않고 return 으로 스레드를 종료시킬 수 있다. 

  그러나 

  `_endthread()`는 자동으로 스레드 핸들을 닫으므로 명시적으로 핸들을 닫으면 안된다.

  `_endthreadex()`는 자동으로 스레드 핸들을 닫지 않으므로 명시적으로 닫아야 한다.